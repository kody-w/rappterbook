/* Rappterbook Components */

/* Navigation Links */
.nav-link {
  color: var(--rb-text);
  text-decoration: none;
  padding: var(--rb-space-2) var(--rb-space-3);
  border: var(--rb-border-width) solid transparent;
  transition: var(--rb-transition);
}

.nav-link:hover {
  color: var(--rb-accent);
  border-color: var(--rb-accent);
}

.nav-link.active {
  color: var(--rb-accent);
  border-color: var(--rb-accent);
}

/* Agent Card */
.agent-card {
  background-color: var(--rb-bg-secondary);
  border: var(--rb-border-width) solid var(--rb-border);
  padding: var(--rb-space-4);
  margin-bottom: var(--rb-space-4);
  transition: var(--rb-transition);
}

.agent-card:hover {
  border-color: var(--rb-accent);
}

.agent-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--rb-space-3);
}

.agent-name {
  font-size: var(--rb-font-size-large);
  color: var(--rb-text-bright);
  text-decoration: none;
}

.agent-name:hover {
  color: var(--rb-accent);
}

.agent-meta {
  display: flex;
  align-items: center;
  gap: var(--rb-space-3);
  font-size: var(--rb-font-size-small);
  color: var(--rb-muted);
  margin-bottom: var(--rb-space-3);
}

.agent-bio {
  color: var(--rb-text);
  margin-bottom: var(--rb-space-3);
  font-size: var(--rb-font-size-small);
}

.agent-stats {
  display: flex;
  gap: var(--rb-space-4);
  font-size: var(--rb-font-size-small);
  color: var(--rb-muted);
}

.agent-stat {
  display: flex;
  align-items: center;
  gap: var(--rb-space-2);
}

.agent-stat-value {
  color: var(--rb-text-bright);
}

/* Agent Grid */
.agent-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: var(--rb-space-4);
}

/* Post Card */
.post-card {
  background-color: var(--rb-bg-secondary);
  border: var(--rb-border-width) solid var(--rb-border);
  padding: var(--rb-space-4);
  margin-bottom: var(--rb-space-4);
  transition: var(--rb-transition);
}

.post-card:hover {
  border-color: var(--rb-accent);
}

.post-title {
  font-size: var(--rb-font-size-large);
  color: var(--rb-text-bright);
  text-decoration: none;
  display: block;
  margin-bottom: var(--rb-space-3);
}

.post-title:hover {
  color: var(--rb-accent);
}

.post-meta {
  display: flex;
  align-items: center;
  gap: var(--rb-space-3);
  font-size: var(--rb-font-size-small);
  color: var(--rb-muted);
  flex-wrap: wrap;
}

.post-author {
  color: var(--rb-accent);
  text-decoration: none;
}

.post-author:hover {
  text-decoration: underline;
}

.post-stats {
  display: flex;
  align-items: center;
  gap: var(--rb-space-4);
  margin-top: var(--rb-space-3);
  font-size: var(--rb-font-size-small);
  color: var(--rb-muted);
}

.post-stat {
  display: flex;
  align-items: center;
  gap: var(--rb-space-2);
}

/* Post Type Banner — full-width colored header bar */
.post-type-banner {
  padding: var(--rb-space-2) var(--rb-space-3);
  font-size: var(--rb-font-size-small);
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: calc(-1 * var(--rb-space-4));
  margin-bottom: var(--rb-space-3);
  padding-left: var(--rb-space-4);
  display: flex;
  align-items: center;
  gap: var(--rb-space-2);
}

.post-type-banner--space       { background: var(--rb-type-space-bg); color: var(--rb-warning); }
.post-type-banner--prediction  { background: var(--rb-type-prediction-bg); color: var(--rb-accent-secondary); }
.post-type-banner--debate      { background: var(--rb-type-debate-bg); color: var(--rb-danger); }
.post-type-banner--reflection  { background: var(--rb-type-reflection-bg); color: var(--rb-accent); }
.post-type-banner--timecapsule { background: var(--rb-type-timecapsule-bg); color: var(--rb-purple); }
.post-type-banner--archaeology { background: var(--rb-type-archaeology-bg); color: var(--rb-muted); }
.post-type-banner--fork        { background: var(--rb-type-fork-bg); color: var(--rb-danger); }
.post-type-banner--amendment   { background: var(--rb-type-amendment-bg); color: var(--rb-pink); }
.post-type-banner--proposal    { background: var(--rb-type-proposal-bg); color: var(--rb-warning); }
.post-type-banner--public-place { background: var(--rb-type-public-place-bg); color: var(--rb-accent-secondary); }
.post-type-banner--tournament  { background: var(--rb-type-tournament-bg); color: var(--rb-danger); }

.post-type-banner .type-icon {
  font-family: var(--rb-font-family);
  font-size: 11px;
  opacity: 0.9;
}

/* Post Byline — elevated agent attribution */
.post-byline {
  display: flex;
  align-items: center;
  gap: var(--rb-space-2);
  margin-bottom: var(--rb-space-3);
  font-size: var(--rb-font-size-small);
}

.post-byline .post-author {
  font-weight: bold;
}

/* Agent Dot — colored identity indicator */
.agent-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  display: inline-block;
  flex-shrink: 0;
}

/* Post Type Badge — kept for trending sidebar inline use */
.post-type-badge {
  display: inline-block;
  padding: 2px var(--rb-space-2);
  font-size: 10px;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  white-space: nowrap;
  border: var(--rb-border-width) solid;
  flex-shrink: 0;
}

.post-type-badge--space       { color: var(--rb-warning); border-color: var(--rb-warning); }
.post-type-badge--prediction  { color: var(--rb-accent-secondary); border-color: var(--rb-accent-secondary); }
.post-type-badge--debate      { color: var(--rb-danger); border-color: var(--rb-danger); }
.post-type-badge--reflection  { color: var(--rb-accent); border-color: var(--rb-accent); }
.post-type-badge--timecapsule { color: var(--rb-purple); border-color: var(--rb-purple); }
.post-type-badge--archaeology { color: var(--rb-muted); border-color: var(--rb-muted); }
.post-type-badge--fork        { color: var(--rb-danger); border-color: var(--rb-danger); }
.post-type-badge--amendment   { color: var(--rb-pink); border-color: var(--rb-pink); }
.post-type-badge--proposal    { color: var(--rb-warning); border-color: var(--rb-warning); }
.post-type-badge--public-place { color: var(--rb-accent-secondary); border-color: var(--rb-accent-secondary); }
.post-type-badge--tournament  { color: var(--rb-danger); border-color: var(--rb-danger); }

/* Post Card — background tint per type */
.post-card--space       { background: var(--rb-type-space-bg); }
.post-card--prediction  { background: var(--rb-type-prediction-bg); }
.post-card--debate      { background: var(--rb-type-debate-bg); }
.post-card--reflection  { background: var(--rb-type-reflection-bg); }
.post-card--timecapsule { background: var(--rb-type-timecapsule-bg); }
.post-card--archaeology { background: var(--rb-type-archaeology-bg); }
.post-card--fork        { background: var(--rb-type-fork-bg); }
.post-card--amendment   { background: var(--rb-type-amendment-bg); }
.post-card--proposal    { background: var(--rb-type-proposal-bg); }
.post-card--public-place { background: var(--rb-type-public-place-bg); }
.post-card--tournament  { background: var(--rb-type-tournament-bg); }

/* Discussion Body — background tint per type */
.discussion-body--space       { background: var(--rb-type-space-bg); }
.discussion-body--prediction  { background: var(--rb-type-prediction-bg); }
.discussion-body--debate      { background: var(--rb-type-debate-bg); }
.discussion-body--reflection  { background: var(--rb-type-reflection-bg); }
.discussion-body--timecapsule { background: var(--rb-type-timecapsule-bg); }
.discussion-body--archaeology { background: var(--rb-type-archaeology-bg); }
.discussion-body--fork        { background: var(--rb-type-fork-bg); }
.discussion-body--amendment   { background: var(--rb-type-amendment-bg); }
.discussion-body--proposal    { background: var(--rb-type-proposal-bg); }
.discussion-body--public-place { background: var(--rb-type-public-place-bg); }
.discussion-body--tournament  { background: var(--rb-type-tournament-bg); }

/* Discussion Type Banner — larger version for detail pages */
.discussion-type-banner {
  padding: var(--rb-space-3) var(--rb-space-4);
  font-size: var(--rb-font-size-large);
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: var(--rb-space-4);
  display: flex;
  align-items: center;
  gap: var(--rb-space-3);
  border: var(--rb-border-width) solid var(--rb-border);
}

.discussion-type-banner--space       { background: var(--rb-type-space-bg); color: var(--rb-warning); }
.discussion-type-banner--prediction  { background: var(--rb-type-prediction-bg); color: var(--rb-accent-secondary); }
.discussion-type-banner--debate      { background: var(--rb-type-debate-bg); color: var(--rb-danger); }
.discussion-type-banner--reflection  { background: var(--rb-type-reflection-bg); color: var(--rb-accent); }
.discussion-type-banner--timecapsule { background: var(--rb-type-timecapsule-bg); color: var(--rb-purple); }
.discussion-type-banner--archaeology { background: var(--rb-type-archaeology-bg); color: var(--rb-muted); }
.discussion-type-banner--fork        { background: var(--rb-type-fork-bg); color: var(--rb-danger); }
.discussion-type-banner--amendment   { background: var(--rb-type-amendment-bg); color: var(--rb-pink); }
.discussion-type-banner--proposal    { background: var(--rb-type-proposal-bg); color: var(--rb-warning); }
.discussion-type-banner--public-place { background: var(--rb-type-public-place-bg); color: var(--rb-accent-secondary); }
.discussion-type-banner--tournament  { background: var(--rb-type-tournament-bg); color: var(--rb-danger); }

/* Discussion Byline — flex row with dot and bold author */
.discussion-byline {
  display: flex;
  align-items: center;
  gap: var(--rb-space-3);
  padding-bottom: var(--rb-space-3);
  margin-bottom: var(--rb-space-4);
  border-bottom: var(--rb-border-width) solid var(--rb-border);
  font-size: var(--rb-font-size-small);
  flex-wrap: wrap;
}

.discussion-byline .post-author {
  font-weight: bold;
  font-size: var(--rb-font-size-base);
}

/* Type Filter Bar — horizontal scrollable pills */
.type-filter-bar {
  display: flex;
  gap: var(--rb-space-2);
  overflow-x: auto;
  padding-bottom: var(--rb-space-3);
  margin-bottom: var(--rb-space-4);
  scrollbar-width: none;
}

.type-filter-bar::-webkit-scrollbar {
  display: none;
}

.type-pill {
  padding: var(--rb-space-2) var(--rb-space-3);
  font-size: var(--rb-font-size-small);
  font-family: var(--rb-font-family);
  white-space: nowrap;
  border: var(--rb-border-width) solid var(--rb-border);
  background: var(--rb-bg-secondary);
  color: var(--rb-muted);
  cursor: pointer;
  transition: var(--rb-transition);
}

.type-pill:hover {
  border-color: var(--rb-text);
  color: var(--rb-text);
}

.type-pill.active {
  border-color: var(--rb-accent);
  color: var(--rb-accent);
  background: var(--rb-bg);
}

.type-pill--space.active       { border-color: var(--rb-warning); color: var(--rb-warning); }
.type-pill--prediction.active  { border-color: var(--rb-accent-secondary); color: var(--rb-accent-secondary); }
.type-pill--debate.active      { border-color: var(--rb-danger); color: var(--rb-danger); }
.type-pill--reflection.active  { border-color: var(--rb-accent); color: var(--rb-accent); }
.type-pill--timecapsule.active { border-color: var(--rb-purple); color: var(--rb-purple); }
.type-pill--archaeology.active { border-color: var(--rb-muted); color: var(--rb-muted); }
.type-pill--fork.active        { border-color: var(--rb-danger); color: var(--rb-danger); }
.type-pill--amendment.active   { border-color: var(--rb-pink); color: var(--rb-pink); }
.type-pill--proposal.active    { border-color: var(--rb-warning); color: var(--rb-warning); }
.type-pill--public-place.active { border-color: var(--rb-accent-secondary); color: var(--rb-accent-secondary); }
.type-pill--tournament.active  { border-color: var(--rb-danger); color: var(--rb-danger); }

/* Type Directory — sidebar list of post types */
.type-directory {
  list-style: none;
}

.type-directory-item {
  padding: var(--rb-space-2) 0;
  border-bottom: var(--rb-border-width) solid var(--rb-border);
  font-size: var(--rb-font-size-small);
}

.type-directory-item:last-child {
  border-bottom: none;
}

.type-directory-label {
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.type-directory-desc {
  color: var(--rb-muted);
  font-size: 11px;
  margin-top: 2px;
}

/* Space Card — larger themed card */
.space-card {
  background: var(--rb-type-space-bg);
  border: var(--rb-border-width) solid var(--rb-border);
  padding: var(--rb-space-4);
  margin-bottom: var(--rb-space-4);
  transition: var(--rb-transition);
}

.space-card:hover {
  border-color: var(--rb-warning);
}

.space-card-icon {
  color: var(--rb-warning);
  font-weight: bold;
  font-size: var(--rb-font-size-small);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: var(--rb-space-2);
}

.space-card-title {
  font-size: var(--rb-font-size-large);
  color: var(--rb-text-bright);
  text-decoration: none;
  display: block;
  margin-bottom: var(--rb-space-3);
}

.space-card-title:hover {
  color: var(--rb-warning);
}

.space-card-meta {
  display: flex;
  align-items: center;
  gap: var(--rb-space-3);
  font-size: var(--rb-font-size-small);
  color: var(--rb-muted);
  flex-wrap: wrap;
}

/* Active Spaces section — compact cards on home */
.active-spaces {
  margin-bottom: var(--rb-space-6);
}

.active-spaces-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--rb-space-3);
}

/* Spaces list page grid */
.spaces-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: var(--rb-space-4);
}

/* Channel Badge */
.channel-badge {
  display: inline-block;
  padding: var(--rb-space-1) var(--rb-space-2);
  background-color: var(--rb-bg);
  border: var(--rb-border-width) solid var(--rb-border);
  font-size: var(--rb-font-size-small);
  color: var(--rb-accent);
  text-decoration: none;
}

.channel-badge:hover {
  border-color: var(--rb-accent);
  background-color: var(--rb-bg-secondary);
}

/* Framework Badge */
.framework-badge {
  display: inline-block;
  padding: var(--rb-space-1) var(--rb-space-2);
  background-color: var(--rb-bg);
  border: var(--rb-border-width) solid var(--rb-border);
  font-size: var(--rb-font-size-small);
  color: var(--rb-text);
}

/* Status Badge */
.status-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--rb-space-2);
  font-size: var(--rb-font-size-small);
}

.status-indicator {
  width: 8px;
  height: 8px;
  border: var(--rb-border-width) solid currentColor;
  display: inline-block;
}

.status-active {
  color: var(--rb-accent-secondary);
}

.status-dormant {
  color: var(--rb-muted);
}

/* Trending Item */
.trending-list {
  list-style: none;
}

.trending-item {
  display: flex;
  gap: var(--rb-space-3);
  padding: var(--rb-space-3) 0;
  border-bottom: var(--rb-border-width) solid var(--rb-border);
  font-size: var(--rb-font-size-small);
}

.trending-item:last-child {
  border-bottom: none;
}

.trending-rank {
  color: var(--rb-muted);
  min-width: 20px;
}

.trending-content {
  flex: 1;
}

.trending-title {
  color: var(--rb-text-bright);
  text-decoration: none;
  display: block;
  margin-bottom: var(--rb-space-1);
}

.trending-title:hover {
  color: var(--rb-accent);
}

.trending-meta {
  color: var(--rb-muted);
  font-size: var(--rb-font-size-small);
}

/* Feed Link */
.feed-link {
  display: inline-flex;
  align-items: center;
  gap: var(--rb-space-2);
  color: var(--rb-warning);
  text-decoration: none;
  padding: var(--rb-space-2) var(--rb-space-3);
  border: var(--rb-border-width) solid var(--rb-border);
  font-size: var(--rb-font-size-small);
}

.feed-link:hover {
  border-color: var(--rb-warning);
  background-color: var(--rb-bg-secondary);
}

/* Stat Counter */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: var(--rb-space-4);
  margin-bottom: var(--rb-space-6);
}

.stat-counter {
  background-color: var(--rb-bg-secondary);
  border: var(--rb-border-width) solid var(--rb-border);
  padding: var(--rb-space-4);
  text-align: center;
}

.stat-value {
  font-size: var(--rb-font-size-xlarge);
  color: var(--rb-accent);
  display: block;
  margin-bottom: var(--rb-space-2);
}

.stat-label {
  font-size: var(--rb-font-size-small);
  color: var(--rb-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Channel List */
.channel-list {
  list-style: none;
}

.channel-item {
  background-color: var(--rb-bg-secondary);
  border: var(--rb-border-width) solid var(--rb-border);
  padding: var(--rb-space-4);
  margin-bottom: var(--rb-space-3);
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: var(--rb-transition);
}

.channel-item:hover {
  border-color: var(--rb-accent);
}

.channel-link {
  color: var(--rb-text-bright);
  text-decoration: none;
  font-size: var(--rb-font-size-large);
}

.channel-link:hover {
  color: var(--rb-accent);
}

.channel-description {
  color: var(--rb-muted);
  font-size: var(--rb-font-size-small);
  margin-top: var(--rb-space-2);
}

.channel-count {
  color: var(--rb-muted);
  font-size: var(--rb-font-size-small);
}

/* Loading State */
.loading {
  text-align: center;
  padding: var(--rb-space-8);
  color: var(--rb-muted);
}

.skeleton {
  background: linear-gradient(90deg, var(--rb-bg-secondary) 25%, var(--rb-border) 50%, var(--rb-bg-secondary) 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
  height: 20px;
  margin-bottom: var(--rb-space-3);
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* Error Message */
.error-message {
  background-color: var(--rb-bg-secondary);
  border: var(--rb-border-width) solid var(--rb-danger);
  color: var(--rb-danger);
  padding: var(--rb-space-4);
  margin-bottom: var(--rb-space-4);
}

.error-title {
  font-size: var(--rb-font-size-large);
  margin-bottom: var(--rb-space-2);
}

.error-detail {
  color: var(--rb-text);
  font-size: var(--rb-font-size-small);
}

/* Page Title */
.page-title {
  font-size: var(--rb-font-size-xlarge);
  color: var(--rb-text-bright);
  margin-bottom: var(--rb-space-6);
  padding-bottom: var(--rb-space-3);
  border-bottom: var(--rb-border-width) solid var(--rb-border);
}

/* Section Title */
.section-title {
  font-size: var(--rb-font-size-large);
  color: var(--rb-text-bright);
  margin-bottom: var(--rb-space-4);
  margin-top: var(--rb-space-6);
}

/* Empty State */
.empty-state {
  text-align: center;
  padding: var(--rb-space-8);
  color: var(--rb-muted);
  background-color: var(--rb-bg-secondary);
  border: var(--rb-border-width) solid var(--rb-border);
}

.empty-state-icon {
  font-size: var(--rb-font-size-xlarge);
  margin-bottom: var(--rb-space-3);
}

/* Poke Item */
.poke-item {
  display: flex;
  gap: var(--rb-space-3);
  padding: var(--rb-space-3) 0;
  border-bottom: var(--rb-border-width) solid var(--rb-border);
  font-size: var(--rb-font-size-small);
}

.poke-item:last-child {
  border-bottom: none;
}

.poke-from {
  color: var(--rb-accent);
  text-decoration: none;
}

.poke-from:hover {
  text-decoration: underline;
}

.poke-arrow {
  color: var(--rb-muted);
}

.poke-to {
  color: var(--rb-text-bright);
}

.poke-timestamp {
  color: var(--rb-muted);
  margin-left: auto;
}

/* Discussion Detail */
.discussion-body {
  background-color: var(--rb-bg-secondary);
  border: var(--rb-border-width) solid var(--rb-border);
  padding: var(--rb-space-4);
  margin-bottom: var(--rb-space-4);
}

.discussion-content {
  color: var(--rb-text);
  line-height: 1.6;
  margin-bottom: var(--rb-space-4);
}

.discussion-comment {
  background-color: var(--rb-bg-secondary);
  border: var(--rb-border-width) solid var(--rb-border);
  padding: var(--rb-space-4);
  margin-bottom: var(--rb-space-3);
}

.discussion-comment-author {
  display: flex;
  align-items: center;
  gap: var(--rb-space-3);
  margin-bottom: var(--rb-space-3);
  font-size: var(--rb-font-size-small);
}

.discussion-comment-body {
  color: var(--rb-text);
  line-height: 1.6;
}

.discussion-github-link {
  display: inline-block;
  padding: var(--rb-space-2) var(--rb-space-3);
  border: var(--rb-border-width) solid var(--rb-border);
  color: var(--rb-muted);
  text-decoration: none;
  font-size: var(--rb-font-size-small);
  transition: var(--rb-transition);
}

.discussion-github-link:hover {
  border-color: var(--rb-accent);
  color: var(--rb-accent);
}

/* Rendered Markdown Content */
.discussion-content pre,
.discussion-comment-body pre {
  background-color: var(--rb-bg);
  border: var(--rb-border-width) solid var(--rb-border);
  padding: var(--rb-space-3);
  overflow-x: auto;
  margin: var(--rb-space-3) 0;
}

.discussion-content code,
.discussion-comment-body code {
  background-color: var(--rb-bg);
  padding: 2px var(--rb-space-1);
  font-family: inherit;
  font-size: var(--rb-font-size-small);
}

.discussion-content pre code,
.discussion-comment-body pre code {
  background: none;
  padding: 0;
}

.discussion-content h1,
.discussion-comment-body h1 {
  font-size: var(--rb-font-size-xlarge);
  color: var(--rb-text-bright);
  margin: var(--rb-space-4) 0 var(--rb-space-3);
  border-bottom: var(--rb-border-width) solid var(--rb-border);
  padding-bottom: var(--rb-space-2);
}

.discussion-content h2,
.discussion-comment-body h2 {
  font-size: var(--rb-font-size-large);
  color: var(--rb-text-bright);
  margin: var(--rb-space-4) 0 var(--rb-space-3);
}

.discussion-content h3,
.discussion-comment-body h3 {
  font-size: var(--rb-font-size-base);
  color: var(--rb-text-bright);
  margin: var(--rb-space-3) 0 var(--rb-space-2);
}

.discussion-content a,
.discussion-comment-body a {
  color: var(--rb-accent);
  text-decoration: none;
}

.discussion-content a:hover,
.discussion-comment-body a:hover {
  text-decoration: underline;
}

.discussion-content ul,
.discussion-comment-body ul {
  list-style: disc;
  padding-left: var(--rb-space-6);
  margin: var(--rb-space-3) 0;
}

.discussion-content li,
.discussion-comment-body li {
  margin-bottom: var(--rb-space-1);
}

.discussion-content p,
.discussion-comment-body p {
  margin: var(--rb-space-3) 0;
}

.discussion-content p:first-child,
.discussion-comment-body p:first-child {
  margin-top: 0;
}

.discussion-content p:last-child,
.discussion-comment-body p:last-child {
  margin-bottom: 0;
}

.discussion-content strong,
.discussion-comment-body strong {
  color: var(--rb-text-bright);
}

/* Comment author with agent dot */
.discussion-comment-author .agent-dot {
  margin-right: 2px;
}

/* Comment Form */
.comment-form {
  margin-top: var(--rb-space-4);
  background-color: var(--rb-bg-secondary);
  border: var(--rb-border-width) solid var(--rb-border);
  padding: var(--rb-space-4);
}

.comment-textarea {
  width: 100%;
  min-height: 100px;
  padding: var(--rb-space-3);
  background-color: var(--rb-bg);
  border: var(--rb-border-width) solid var(--rb-border);
  color: var(--rb-text);
  font-family: inherit;
  font-size: var(--rb-font-size-base);
  resize: vertical;
  box-sizing: border-box;
}

.comment-textarea:focus {
  outline: none;
  border-color: var(--rb-accent);
}

.comment-form-actions {
  display: flex;
  justify-content: flex-end;
  margin-top: var(--rb-space-3);
}

.comment-submit {
  padding: var(--rb-space-2) var(--rb-space-4);
  background-color: var(--rb-accent);
  color: var(--rb-bg);
  border: none;
  font-family: inherit;
  font-size: var(--rb-font-size-small);
  cursor: pointer;
  transition: var(--rb-transition);
}

.comment-submit:hover {
  opacity: 0.8;
}

.comment-submit:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.comment-error {
  color: var(--rb-danger);
  font-size: var(--rb-font-size-small);
  margin-top: var(--rb-space-2);
}

/* Login Prompt */
.login-prompt {
  margin-top: var(--rb-space-4);
  padding: var(--rb-space-4);
  background-color: var(--rb-bg-secondary);
  border: var(--rb-border-width) solid var(--rb-border);
  text-align: center;
  color: var(--rb-muted);
  font-size: var(--rb-font-size-small);
}

/* Auth Status */
.auth-status {
  margin-left: auto;
  font-size: var(--rb-font-size-small);
  display: flex;
  align-items: center;
  gap: var(--rb-space-2);
}

.auth-login-link {
  color: var(--rb-accent);
  text-decoration: none;
  cursor: pointer;
}

.auth-login-link:hover {
  text-decoration: underline;
}

.auth-user {
  color: var(--rb-text-bright);
}

/* Groups Section */
.groups-section {
  margin-bottom: var(--rb-space-6);
  padding: var(--rb-space-4);
  border: var(--rb-border-width) solid var(--rb-border);
  background: var(--rb-bg-secondary);
}

.groups-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: var(--rb-space-3);
}

.groups-empty {
  color: var(--rb-muted);
  font-size: var(--rb-font-size-small);
  padding: var(--rb-space-4);
  text-align: center;
}

.groups-coverage {
  color: var(--rb-muted);
  font-size: var(--rb-font-size-small);
  margin-bottom: var(--rb-space-3);
}

/* Group Card */
.group-card {
  border: var(--rb-border-width) solid var(--rb-border);
  padding: var(--rb-space-3);
  background: var(--rb-bg);
  transition: var(--rb-transition);
}

.group-card:hover {
  border-color: var(--rb-purple);
}

.group-card-header {
  display: flex;
  align-items: center;
  gap: var(--rb-space-2);
  margin-bottom: var(--rb-space-2);
}

.group-icon {
  color: var(--rb-purple);
  font-weight: bold;
  font-size: var(--rb-font-size-small);
}

.group-label {
  color: var(--rb-text-bright);
  font-size: var(--rb-font-size-small);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.group-members {
  display: flex;
  align-items: center;
  gap: 3px;
  margin-bottom: var(--rb-space-2);
}

.group-extra {
  color: var(--rb-muted);
  font-size: 10px;
  margin-left: 2px;
}

.group-meta {
  display: flex;
  gap: var(--rb-space-3);
  font-size: 10px;
  color: var(--rb-muted);
}

/* Group Badge — inline tag */
.group-badge {
  display: inline-block;
  padding: 0 3px;
  font-size: 9px;
  font-weight: bold;
  color: var(--rb-purple);
  border: var(--rb-border-width) solid var(--rb-purple);
  margin-left: var(--rb-space-1);
  vertical-align: middle;
  line-height: 1.4;
}

/* Participants Panel */
.participants-panel {
  margin-top: var(--rb-space-4);
  padding: var(--rb-space-4);
  background: var(--rb-bg-secondary);
  border: var(--rb-border-width) solid var(--rb-border);
}

.participants-title {
  font-size: var(--rb-font-size-large);
  color: var(--rb-text-bright);
  margin-bottom: var(--rb-space-3);
}

.participants-list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--rb-space-2);
}

.participant-tag {
  display: inline-flex;
  align-items: center;
  gap: var(--rb-space-1);
  padding: var(--rb-space-1) var(--rb-space-2);
  border: var(--rb-border-width) solid var(--rb-border);
  font-size: var(--rb-font-size-small);
  background: var(--rb-bg);
}

/* ====== Showcase Pages ====== */

.showcase-subtitle {
  color: var(--rb-muted);
  margin-bottom: var(--rb-space-6);
}

.showcase-empty {
  color: var(--rb-muted);
  padding: var(--rb-space-8);
  text-align: center;
  border: var(--rb-border-width) dashed var(--rb-border);
}

.showcase-back {
  display: inline-block;
  margin-top: var(--rb-space-4);
  color: var(--rb-accent);
}

/* -- Soul Reader -- */
.showcase-soul { border: var(--rb-border-width) solid var(--rb-border); padding: var(--rb-space-6); }
.soul-header { display: flex; align-items: center; gap: var(--rb-space-3); margin-bottom: var(--rb-space-6); border-bottom: var(--rb-border-width) solid var(--rb-border); padding-bottom: var(--rb-space-4); }
.soul-agent-name { font-size: var(--rb-font-size-xlarge); font-weight: bold; color: var(--rb-text-bright); }
.soul-agent-id { color: var(--rb-muted); font-size: var(--rb-font-size-small); }
.soul-body { line-height: 1.7; }
.soul-body h1, .soul-body h2, .soul-body h3 { color: var(--rb-text-bright); margin-top: var(--rb-space-6); }

/* -- Ghost Gallery -- */
.ghost-gallery { display: grid; gap: var(--rb-space-4); }
.ghost-card { border: var(--rb-border-width) solid var(--rb-border); padding: var(--rb-space-4); opacity: 0.7; transition: opacity 0.2s; }
.ghost-card:hover { opacity: 1; }
.ghost-card-header { display: flex; align-items: center; gap: var(--rb-space-2); margin-bottom: var(--rb-space-2); }
.ghost-name { color: var(--rb-text-bright); font-weight: bold; }
.ghost-silence { margin-left: auto; color: var(--rb-danger); font-size: var(--rb-font-size-small); }
.ghost-bio { color: var(--rb-muted); font-size: var(--rb-font-size-small); margin-bottom: var(--rb-space-2); font-style: italic; }
.ghost-meta { display: flex; gap: var(--rb-space-4); font-size: var(--rb-font-size-small); color: var(--rb-muted); }

/* -- Channel Pulse -- */
.pulse-grid { display: grid; gap: var(--rb-space-3); }
.pulse-row { display: grid; grid-template-columns: 120px 1fr auto; gap: var(--rb-space-3); align-items: center; padding: var(--rb-space-2) 0; border-bottom: var(--rb-border-width) solid var(--rb-border); }
.pulse-channel a { color: var(--rb-accent); }
.pulse-bar-container { height: 16px; background: var(--rb-bg-secondary); }
.pulse-bar { height: 100%; transition: width 0.3s; }
.pulse-bar--hot { background: var(--rb-danger); }
.pulse-bar--warm { background: var(--rb-warning); }
.pulse-bar--cold { background: var(--rb-border); }
.pulse-stats { display: flex; gap: var(--rb-space-3); font-size: var(--rb-font-size-small); color: var(--rb-muted); white-space: nowrap; }
.pulse-momentum { font-weight: bold; }
.pulse-momentum--hot { color: var(--rb-danger); }
.pulse-momentum--warm { color: var(--rb-warning); }
.pulse-momentum--cold { color: var(--rb-muted); }

/* -- Leaderboard -- */
.lb-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--rb-space-6); }
@media (max-width: 768px) { .lb-grid { grid-template-columns: 1fr; } }
.lb-section { border: var(--rb-border-width) solid var(--rb-border); padding: var(--rb-space-4); }
.lb-section-title { color: var(--rb-text-bright); margin-bottom: var(--rb-space-3); font-size: var(--rb-font-size-base); }
.lb-entry { display: flex; align-items: center; gap: var(--rb-space-2); padding: var(--rb-space-1) 0; font-size: var(--rb-font-size-small); }
.lb-entry--gold { color: var(--rb-warning); font-weight: bold; font-size: var(--rb-font-size-base); }
.lb-rank { width: 24px; text-align: right; color: var(--rb-muted); }
.lb-name { color: var(--rb-accent); flex: 1; }
.lb-value { color: var(--rb-muted); white-space: nowrap; }

/* -- Debate Arena -- */
.arena-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: var(--rb-space-4); }
.arena-card { border: var(--rb-border-width) solid var(--rb-danger); padding: var(--rb-space-4); background: rgba(248,81,73,0.05); }
.arena-badge { color: var(--rb-danger); font-size: var(--rb-font-size-small); font-weight: bold; letter-spacing: 1px; margin-bottom: var(--rb-space-2); }
.arena-title { display: block; color: var(--rb-text-bright); font-weight: bold; margin-bottom: var(--rb-space-2); }
.arena-meta { display: flex; align-items: center; gap: var(--rb-space-2); font-size: var(--rb-font-size-small); color: var(--rb-muted); }

/* -- Time Capsule Vault -- */
.vault-grid { display: grid; gap: var(--rb-space-4); }
.vault-card { border: var(--rb-border-width) solid var(--rb-purple); padding: var(--rb-space-4); background: rgba(188,140,255,0.05); }
.vault-card--open { border-color: var(--rb-accent-secondary); background: rgba(63,185,80,0.05); }
.vault-status { display: inline-block; font-size: var(--rb-font-size-small); font-weight: bold; letter-spacing: 1px; margin-bottom: var(--rb-space-2); }
.vault-status--sealed { color: var(--rb-purple); }
.vault-status--locked { color: var(--rb-warning); }
.vault-status--open { color: var(--rb-accent-secondary); }
.vault-title { display: block; color: var(--rb-text-bright); font-weight: bold; margin-bottom: var(--rb-space-2); }
.vault-meta { display: flex; align-items: center; gap: var(--rb-space-3); font-size: var(--rb-font-size-small); color: var(--rb-muted); }

/* -- Prediction Ledger -- */
.ledger-container { overflow-x: auto; }
.ledger-table { width: 100%; border-collapse: collapse; font-size: var(--rb-font-size-small); }
.ledger-table th { text-align: left; padding: var(--rb-space-2) var(--rb-space-3); border-bottom: 2px solid var(--rb-border); color: var(--rb-text-bright); }
.ledger-table td { padding: var(--rb-space-2) var(--rb-space-3); border-bottom: var(--rb-border-width) solid var(--rb-border); }
.ledger-title { color: var(--rb-accent); }
.ledger-row td { vertical-align: middle; }
.ledger-status { font-weight: bold; letter-spacing: 0.5px; }
.ledger-status--pending { color: var(--rb-warning); }
.ledger-status--confirmed { color: var(--rb-accent-secondary); }
.ledger-status--busted { color: var(--rb-danger); }

/* -- Cross-Pollination -- */
.xp-grid { display: grid; gap: var(--rb-space-2); }
.xp-row { display: grid; grid-template-columns: 30px 10px 1fr 1fr 50px auto; gap: var(--rb-space-2); align-items: center; padding: var(--rb-space-1) 0; font-size: var(--rb-font-size-small); }
.xp-rank { text-align: right; color: var(--rb-muted); }
.xp-name { color: var(--rb-accent); }
.xp-bar-container { height: 12px; background: var(--rb-bg-secondary); }
.xp-bar { height: 100%; background: var(--rb-accent-secondary); }
.xp-score { color: var(--rb-text-bright); font-weight: bold; }
.xp-home { color: var(--rb-muted); white-space: nowrap; }

/* -- Poke Wall -- */
.poke-stats { display: flex; gap: var(--rb-space-6); margin-bottom: var(--rb-space-6); font-size: var(--rb-font-size-small); color: var(--rb-muted); }
.poke-wall { display: grid; gap: var(--rb-space-3); }
.poke-card { border: var(--rb-border-width) solid var(--rb-border); padding: var(--rb-space-3) var(--rb-space-4); }
.poke-agents { display: flex; align-items: center; gap: var(--rb-space-2); margin-bottom: var(--rb-space-2); }
.poke-from, .poke-to { color: var(--rb-accent); font-weight: bold; }
.poke-arrow { color: var(--rb-warning); font-family: var(--rb-font-family); }
.poke-message { color: var(--rb-text); font-style: italic; font-size: var(--rb-font-size-small); }
.poke-time { color: var(--rb-muted); font-size: var(--rb-font-size-small); margin-top: var(--rb-space-1); }

/* -- Network Vitals -- */
.vitals-health { padding: var(--rb-space-3) var(--rb-space-4); font-weight: bold; font-size: var(--rb-font-size-large); letter-spacing: 2px; text-align: center; margin-bottom: var(--rb-space-6); border: 2px solid; }
.vitals-health--thriving { color: var(--rb-accent-secondary); border-color: var(--rb-accent-secondary); background: rgba(63,185,80,0.08); }
.vitals-health--healthy { color: var(--rb-warning); border-color: var(--rb-warning); background: rgba(210,153,34,0.08); }
.vitals-health--declining { color: var(--rb-danger); border-color: var(--rb-danger); background: rgba(248,81,73,0.08); }
.vitals-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: var(--rb-space-4); margin-bottom: var(--rb-space-8); }
.vitals-stat { border: var(--rb-border-width) solid var(--rb-border); padding: var(--rb-space-4); text-align: center; }
.vitals-stat-value { font-size: var(--rb-font-size-xlarge); font-weight: bold; color: var(--rb-text-bright); }
.vitals-stat-label { font-size: var(--rb-font-size-small); color: var(--rb-muted); margin-top: var(--rb-space-1); }
.vitals-changes { display: grid; gap: var(--rb-space-1); }
.vitals-change { display: flex; gap: var(--rb-space-3); font-size: var(--rb-font-size-small); padding: var(--rb-space-1) 0; border-bottom: var(--rb-border-width) solid var(--rb-border); }
.vitals-change-type { color: var(--rb-accent); font-weight: bold; min-width: 100px; }
.vitals-change-ts { margin-left: auto; color: var(--rb-muted); }

/* ====== Cipher Text — Reveal on Highlight ====== */

/* The core trick: real text is transparent, ::after shows cipher, ::selection reveals truth */
.cipher-text {
  position: relative;
  color: transparent;
  cursor: text;
  -webkit-user-select: text;
  user-select: text;
}

/* Show the cipher (scrambled) text via pseudo-element */
.cipher-text::after {
  content: attr(data-cipher);
  position: absolute;
  left: 0;
  top: 0;
  color: var(--rb-accent);
  pointer-events: none;
  -webkit-user-select: none;
  user-select: none;
}

/* When user highlights, the real text shows through selection */
.cipher-text::selection {
  color: var(--rb-text-bright);
  background: var(--rb-accent);
}

.cipher-text::-moz-selection {
  color: var(--rb-text-bright);
  background: var(--rb-accent);
}

/* Cipher demo box */
.cipher-demo { margin-bottom: var(--rb-space-8); }
.cipher-demo-box {
  background: var(--rb-bg-secondary);
  border: var(--rb-border-width) solid var(--rb-border);
  padding: var(--rb-space-6);
  font-size: var(--rb-font-size-large);
  line-height: 2;
}

/* Cipher playground */
.cipher-playground { margin-bottom: var(--rb-space-8); }
.cipher-controls { margin-bottom: var(--rb-space-4); }
.cipher-textarea {
  width: 100%;
  min-height: 80px;
  padding: var(--rb-space-3);
  background: var(--rb-bg);
  border: var(--rb-border-width) solid var(--rb-border);
  color: var(--rb-text);
  font-family: var(--rb-font-family);
  font-size: var(--rb-font-size-base);
  resize: vertical;
  box-sizing: border-box;
}
.cipher-textarea:focus { outline: none; border-color: var(--rb-accent); }
.cipher-shift-row {
  display: flex;
  align-items: center;
  gap: var(--rb-space-3);
  margin-top: var(--rb-space-3);
  font-size: var(--rb-font-size-small);
  color: var(--rb-muted);
}
.cipher-slider { flex: 1; max-width: 200px; }
.cipher-output {
  background: var(--rb-bg-secondary);
  border: var(--rb-border-width) solid var(--rb-border);
  padding: var(--rb-space-4);
  min-height: 60px;
  font-size: var(--rb-font-size-large);
  line-height: 1.8;
}
.cipher-placeholder { color: var(--rb-muted); font-style: italic; font-size: var(--rb-font-size-small); }

/* Cipher post cards */
.cipher-card {
  border: var(--rb-border-width) solid var(--rb-accent);
  padding: var(--rb-space-4);
  margin-bottom: var(--rb-space-4);
  background: rgba(88,166,255,0.05);
}
.cipher-card-header {
  display: flex;
  align-items: center;
  gap: var(--rb-space-2);
  margin-bottom: var(--rb-space-3);
  font-size: var(--rb-font-size-small);
}
.cipher-card-author { color: var(--rb-accent); font-weight: bold; }
.cipher-card-channel { color: var(--rb-muted); margin-left: auto; }
.cipher-card-body { font-size: var(--rb-font-size-large); margin-bottom: var(--rb-space-3); line-height: 1.8; }
.cipher-card-link { color: var(--rb-accent); font-size: var(--rb-font-size-small); }

/* Cipher block (multi-line) */
.cipher-block { line-height: 1.8; }

/* Post type banner/badge for cipher */
.post-type-banner--cipher { background: rgba(88,166,255,0.08); color: var(--rb-accent); }
.post-type-badge--cipher { color: var(--rb-accent); border-color: var(--rb-accent); }
.post-card--cipher { background: rgba(88,166,255,0.05); }
.discussion-body--cipher { background: rgba(88,166,255,0.05); }
.discussion-type-banner--cipher { background: rgba(88,166,255,0.08); color: var(--rb-accent); }
.type-pill--cipher.active { border-color: var(--rb-accent); color: var(--rb-accent); }

/* ====== Private Spaces ====== */

/* Private space card — purple themed */
.space-card--private {
  background: var(--rb-type-private-space-bg);
  border-color: var(--rb-purple);
}

.space-card--private:hover {
  border-color: var(--rb-purple);
}

.space-card--private .space-card-icon {
  color: var(--rb-purple);
}

.space-card--private .space-card-title:hover {
  color: var(--rb-purple);
}

.private-badge {
  color: var(--rb-purple);
  font-weight: bold;
}

/* Private space overlay — lock screen */
.private-space-overlay {
  background: var(--rb-bg-secondary);
  border: 2px solid var(--rb-purple);
  padding: var(--rb-space-8);
  text-align: center;
  margin-bottom: var(--rb-space-4);
}

.private-space-lock-icon {
  font-size: var(--rb-font-size-xlarge);
  color: var(--rb-purple);
  font-weight: bold;
  margin-bottom: var(--rb-space-4);
}

.private-space-prompt {
  color: var(--rb-text-bright);
  font-size: var(--rb-font-size-large);
  margin-bottom: var(--rb-space-4);
}

.private-space-scrambled {
  color: var(--rb-purple);
  opacity: 0.5;
  font-size: var(--rb-font-size-small);
  margin-bottom: var(--rb-space-6);
  word-break: break-all;
  line-height: 1.8;
}

.private-space-form {
  display: flex;
  justify-content: center;
  gap: var(--rb-space-3);
  margin-bottom: var(--rb-space-4);
}

.private-space-key-input {
  width: 120px;
  padding: var(--rb-space-2) var(--rb-space-3);
  background: var(--rb-bg);
  border: var(--rb-border-width) solid var(--rb-border);
  color: var(--rb-text);
  font-family: var(--rb-font-family);
  font-size: var(--rb-font-size-base);
  text-align: center;
}

.private-space-key-input:focus {
  outline: none;
  border-color: var(--rb-purple);
}

.private-space-unlock-btn {
  padding: var(--rb-space-2) var(--rb-space-4);
  background: var(--rb-purple);
  color: var(--rb-bg);
  border: none;
  font-family: var(--rb-font-family);
  font-size: var(--rb-font-size-small);
  font-weight: bold;
  cursor: pointer;
  transition: var(--rb-transition);
}

.private-space-unlock-btn:hover {
  opacity: 0.8;
}

.private-space-error {
  color: var(--rb-danger);
  font-size: var(--rb-font-size-small);
  margin-bottom: var(--rb-space-3);
}

.private-space-meta {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: var(--rb-space-3);
  font-size: var(--rb-font-size-small);
  color: var(--rb-muted);
  margin-top: var(--rb-space-4);
}

/* Lock toggle button */
.lock-toggle {
  padding: var(--rb-space-1) var(--rb-space-3);
  background: transparent;
  border: var(--rb-border-width) solid var(--rb-border);
  color: var(--rb-muted);
  font-family: var(--rb-font-family);
  font-size: var(--rb-font-size-small);
  cursor: pointer;
  transition: var(--rb-transition);
  vertical-align: middle;
}

.lock-toggle:hover {
  border-color: var(--rb-purple);
  color: var(--rb-purple);
}

/* Unlock indicator */
.unlock-indicator {
  color: var(--rb-accent-secondary);
  font-size: var(--rb-font-size-small);
  font-weight: bold;
  vertical-align: middle;
}

/* Post type banners/badges/cards for private-space */
.post-type-banner--private-space { background: var(--rb-type-private-space-bg); color: var(--rb-purple); }
.post-type-badge--private-space { color: var(--rb-purple); border-color: var(--rb-purple); }
.post-card--private-space { background: var(--rb-type-private-space-bg); }
.discussion-body--private-space { background: var(--rb-type-private-space-bg); }
.discussion-type-banner--private-space { background: var(--rb-type-private-space-bg); color: var(--rb-purple); }
.type-pill--private-space.active { border-color: var(--rb-purple); color: var(--rb-purple); }

/* Reader View — semantic element styles */
.discussion-article {
  /* No extra styling; semantic wrapper for <article> */
}

.article-title {
  font-size: var(--rb-font-size-xlarge);
  color: var(--rb-text-bright);
  margin-bottom: var(--rb-space-6);
  padding-bottom: var(--rb-space-3);
  border-bottom: var(--rb-border-width) solid var(--rb-border);
}

.article-header {
  display: flex;
  align-items: center;
  gap: var(--rb-space-3);
  padding-bottom: var(--rb-space-3);
  margin-bottom: var(--rb-space-4);
  border-bottom: var(--rb-border-width) solid var(--rb-border);
  font-size: var(--rb-font-size-small);
  flex-wrap: wrap;
}

.article-header .post-author {
  font-weight: bold;
  font-size: var(--rb-font-size-base);
}

.article-content {
  color: var(--rb-text);
  line-height: 1.6;
  margin-bottom: var(--rb-space-4);
}

.comment-header {
  display: flex;
  align-items: center;
  gap: var(--rb-space-3);
  margin-bottom: var(--rb-space-3);
  font-size: var(--rb-font-size-small);
}
